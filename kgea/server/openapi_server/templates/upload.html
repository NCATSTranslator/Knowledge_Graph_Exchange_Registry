{% extends "layout.html" %}
{% block menu %}
{% include "logout.html" %}
{% endblock %}
{% block content %}
    <h1>Upload KGE (Meta)Data Files</h1>
    <script>
        async function UploadFile(source, target)
        {
            console.log('UploadFile(',str(source),", ",target,')');

            let formData = new FormData();
            let filename = source.files[0];

            formData.append("data_file", filename);

            try {
               let r = await fetch('/upload/'+target+'/'+{{session}}, {method: "POST", body: formData});
               console.log('HTTP response code:',r.status);
            } catch(e) {
               console.log('File upload error:', e);
            }

        }
    </script>

    <h3>Uploading of KGE File Set for "{{kg_name}}", submitted by {{submitter}}</h3>

    <br>
    <h4>Select Content File for Upload:</h4>
    <p>Single file selection (for now) before upload. This may be changed in further releases.</p>
    <input class="textbox" type="file" name="content" onchange="UploadFile(this,'content')"/>

    <br>
    <h4>Select Metadata File for Upload:</h4>
    <p>Must be valid KGX metadata generated from your dataset. Read more <a href="https://github.com/biolink/kgx">here</a>.</p>
    <input class="textbox" type="file" name="metadata" onchange="UploadFile(this,'metadata')"/>

{% endblock %}
