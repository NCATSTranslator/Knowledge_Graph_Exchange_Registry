{% extends "layout.html" %}
{% block scripts %}
    <script>
        async function UploadFile(source)
        {
            console.log('UploadFile(',"{{session}}, type: '",source.name,"', file: ", source.files[0], ')');

            let formData = new FormData();

            formData.append("session", "{{session}}");
            formData.append("data_type", source.name);

            let datafile = source.files[0];
            formData.append("data_file", datafile);

            try {
               let r = await fetch('/upload', {method: "POST", body: formData});
               console.log('HTTP response code:',r.status);
            } catch(e) {
               console.log('File upload error:', e);
            }
        }
    </script>
{% endblock %}
{% block menu %}
{% include "logout.html" %}
{% endblock %}
{% block content %}
    <h1>Upload KGE (Meta)Data Files</h1>


    <h3>Uploading of KGE File Set for "{{kg_name}}", submitted by {{submitter}}</h3>

    <br>
    <h4>Select Content File for Upload:</h4>
    <p>Single file selection (for now) before upload. This may be changed in further releases.
    <input class="textbox" type="file" name="content" onchange="UploadFile(this)"/>

    <br>
    <h4>Select Metadata File for Upload:</h4>
    <p>Must be valid KGX metadata generated from your dataset. Read more <a href="https://github.com/biolink/kgx">here</a>.
    <input class="textbox" type="file" name="metadata" onchange="UploadFile(this)"/>

{% endblock %}
